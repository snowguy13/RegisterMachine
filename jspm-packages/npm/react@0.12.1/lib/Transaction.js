/* */
"format cjs";!function(e){"use strict";var t=require("./invariant"),n={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(n,r,o,a,i,s,u,c){"production"!==e.env.NODE_ENV?t(!this.isInTransaction(),"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction."):t(!this.isInTransaction());var l,p;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),p=n.call(r,o,a,i,s,u,c),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(d){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return p},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var o=t[n];try{this.wrapperInitData[n]=r.OBSERVED_ERROR,this.wrapperInitData[n]=o.initialize?o.initialize.call(this):null}finally{if(this.wrapperInitData[n]===r.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(a){}}}},closeAll:function(n){"production"!==e.env.NODE_ENV?t(this.isInTransaction(),"Transaction.closeAll(): Cannot close transaction when none are open."):t(this.isInTransaction());for(var o=this.transactionWrappers,a=n;a<o.length;a++){var i,s=o[a],u=this.wrapperInitData[a];try{i=!0,u!==r.OBSERVED_ERROR&&s.close&&s.close.call(this,u),i=!1}finally{if(i)try{this.closeAll(a+1)}catch(c){}}}this.wrapperInitData.length=0}},r={Mixin:n,OBSERVED_ERROR:{}};module.exports=r}(require("github:jspm/nodelibs@0.0.3/process"));
//# sourceMappingURL=Transaction.js.map