/* */
"format cjs";function createState(e,t,n){return{localScope:{parentNode:t,parentScope:null,identifiers:{},tempVarIndex:0},superClass:null,mungeNamespace:"",methodNode:null,methodFuncNode:null,className:null,scopeIsStrict:null,indentBy:0,g:{opts:n,position:0,extra:{},buffer:"",source:e,docblock:null,tagNamespaceUsed:!1,isBolt:void 0,sourceMap:null,sourceMapFilename:"source.js",sourceLine:1,bufferLine:1,originalProgramAST:null,sourceColumn:0,bufferColumn:0}}}function updateState(e,t){var n=Object.create(e);return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function catchup(e,t,n){if(!(e<t.g.position)){var r=t.g.source.substring(t.g.position,e),o=updateIndent(r,t);if(t.g.sourceMap&&o){t.g.sourceMap.addMapping({generated:{line:t.g.bufferLine,column:t.g.bufferColumn},original:{line:t.g.sourceLine,column:t.g.sourceColumn},source:t.g.sourceMapFilename});for(var a=r.split("\n"),i=o.split("\n"),u=1;u<a.length-1;u++)t.g.sourceMap.addMapping({generated:{line:t.g.bufferLine,column:0},original:{line:t.g.sourceLine,column:0},source:t.g.sourceMapFilename}),t.g.sourceLine++,t.g.bufferLine++;a.length>1&&(t.g.sourceLine++,t.g.bufferLine++,t.g.sourceColumn=0,t.g.bufferColumn=0),t.g.sourceColumn+=a[a.length-1].length,t.g.bufferColumn+=i[i.length-1].length}t.g.buffer+=n?n(o):o,t.g.position=e}}function getNodeSourceText(e,t){return t.g.source.substring(e.range[0],e.range[1])}function replaceNonWhite(e){return e.replace(nonWhiteRegexp," ")}function stripNonWhite(e){return e.replace(nonWhiteRegexp,"")}function catchupWhiteOut(e,t){catchup(e,t,replaceNonWhite)}function catchupWhiteSpace(e,t){catchup(e,t,stripNonWhite)}function stripNonNewline(e){return e.replace(reNonNewline,function(){return""})}function catchupNewlines(e,t){catchup(e,t,stripNonNewline)}function move(e,t){if(t.g.sourceMap){e<t.g.position&&(t.g.position=0,t.g.sourceLine=1,t.g.sourceColumn=0);var n=t.g.source.substring(t.g.position,e),r=n.split("\n");r.length>1&&(t.g.sourceLine+=r.length-1,t.g.sourceColumn=0),t.g.sourceColumn+=r[r.length-1].length}t.g.position=e}function append(e,t){if(t.g.sourceMap&&e){t.g.sourceMap.addMapping({generated:{line:t.g.bufferLine,column:t.g.bufferColumn},original:{line:t.g.sourceLine,column:t.g.sourceColumn},source:t.g.sourceMapFilename});var n=e.split("\n");n.length>1&&(t.g.bufferLine+=n.length-1,t.g.bufferColumn=0),t.g.bufferColumn+=n[n.length-1].length}t.g.buffer+=e}function updateIndent(e,t){var n=t.indentBy;if(0>n)for(var r=0;-n>r;r++)e=e.replace(leadingIndentRegexp,"$1");else for(var r=0;n>r;r++)e=e.replace(leadingIndentRegexp,"$1$2$2");return e}function indentBefore(e,t){var n=e;for(e-=1;e>0&&"\n"!=t.g.source[e];)t.g.source[e].match(/[ \t]/)||(n=e),e--;return t.g.source.substring(e+1,n)}function getDocblock(e){if(!e.g.docblock){var t=require("./docblock");e.g.docblock=t.parseAsObject(t.extract(e.g.source))}return e.g.docblock}function identWithinLexicalScope(e,t,n){for(var r=t.localScope;r;){if(void 0!==r.identifiers[e])return!0;if(n&&r.parentNode===n)break;r=r.parentScope}return!1}function identInLocalScope(e,t){return void 0!==t.localScope.identifiers[e]}function initScopeMetadata(e,t,n){return{boundaryNode:e,bindingPath:t,bindingNode:n}}function declareIdentInLocalScope(e,t,n){n.localScope.identifiers[e]={boundaryNode:t.boundaryNode,path:t.path,node:t.node,state:Object.create(n)}}function getLexicalBindingMetadata(e,t){return t.localScope.identifiers[e]}function analyzeAndTraverse(e,t,n,r,o){if(n.type){if(e(n,r,o)===!1)return;r.unshift(n)}getOrderedChildren(n).forEach(function(e){t(e,r,o)}),n.type&&r.shift()}function getOrderedChildren(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&enqueueNodeWithStartIndex(t,e[n]);return t.sort(function(e,t){return e[1]-t[1]}),t.map(function(e){return e[0]})}function enqueueNodeWithStartIndex(e,t){if("object"==typeof t&&null!==t)if(t.range)e.push([t,t.range[0]]);else if(Array.isArray(t))for(var n=0;n<t.length;n++)enqueueNodeWithStartIndex(e,t[n])}function containsChildOfType(e,t){function n(e){return e.type===t?(o=!0,!1):void 0}function r(e){o||(o=containsChildOfType(e,t))}var o=!1;return analyzeAndTraverse(n,r,e,[]),o}function getBoundaryNode(e){for(var t=0;t<e.length;++t)if(scopeTypes[e[t].type])return e[t];throw new Error("Expected to find a node with one of the following types in path:\n"+JSON.stringify(Object.keys(scopeTypes)))}var Syntax=require("esprima-fb").Syntax,leadingIndentRegexp=/(^|\n)( {2}|\t)/g,nonWhiteRegexp=/(\S)/g,reNonNewline=/[^\n]/g,scopeTypes={};scopeTypes[Syntax.FunctionExpression]=!0,scopeTypes[Syntax.FunctionDeclaration]=!0,scopeTypes[Syntax.Program]=!0,exports.append=append,exports.catchup=catchup,exports.catchupWhiteOut=catchupWhiteOut,exports.catchupWhiteSpace=catchupWhiteSpace,exports.catchupNewlines=catchupNewlines,exports.containsChildOfType=containsChildOfType,exports.createState=createState,exports.declareIdentInLocalScope=declareIdentInLocalScope,exports.getBoundaryNode=getBoundaryNode,exports.getDocblock=getDocblock,exports.getLexicalBindingMetadata=getLexicalBindingMetadata,exports.initScopeMetadata=initScopeMetadata,exports.identWithinLexicalScope=identWithinLexicalScope,exports.identInLocalScope=identInLocalScope,exports.indentBefore=indentBefore,exports.move=move,exports.scopeTypes=scopeTypes,exports.updateIndent=updateIndent,exports.updateState=updateState,exports.analyzeAndTraverse=analyzeAndTraverse,exports.getOrderedChildren=getOrderedChildren,exports.getNodeSourceText=getNodeSourceText;
//# sourceMappingURL=utils.js.map